---
title: "Alibaba Cloud Server Setup Log (Part 2)"
date: "2026-01-12"
description: "frp and RustDesk Cloud-Edge Synergy Solution"
---

> 1Panel accelerated mirror address: https://docker.1panel.live

---

## üöÄ Architecture Overview: Cloud-Edge Synergy

* **Cloud (Alibaba Cloud - Wuhan):** Acts as the **FRP Server** and **RustDesk Server**, serving as the sole public network "meeting point".
* **Edge (Local Ubuntu):** Acts as the **FRP Client** and **RustDesk Client**, mapping computing power, storage, and desktop environments to the public network through penetration tunnels.

---

## üõ†Ô∏è FRP Setup Log: Connecting the Intranet

| Phase | Key Points | Troubleshooting Notes |
| --- | --- | --- |
| **Server (frps)** | Deployed via 1Panel, Port 7000. | **Firewall:** Port 7000 must be opened in both "Alibaba Cloud Security Group" and "1Panel Firewall". |
| **Client (frpc)** | Maps local port 22 to public port 6000. | **127.0.0.1 Trap:** `serverAddr` must be the public IP, otherwise you'll get `connection refused`. |
| **Security Hardening** | Must set `auth.token`. | **SSH Security:** Once ports are exposed, disable password login and use SSH keys. |
| **Application Expansion** | Can later map AList, databases, and development ports. | **Performance:** Leverage 200M bandwidth to support multi-channel concurrent mapping without lag. |

---

## üñ•Ô∏è RustDesk Setup Log: Self-hosted HD Relay Station


### 1. Core Lessons Learned (Must Read)

* **Listen IP Binding:** 1Panel default might bind to `127.0.0.1`. It must be changed to **`0.0.0.0`** (preferably using `host` mode), otherwise, public traffic cannot enter.
* **Importance of UDP:** Port `21116` needs both TCP and **UDP**. Without UDP, the client will remain "Not Ready".

### 2. Deployment Checklist

* **Key Authentication:** Retrieve the key from `/data/id_ed25519.pub` for private encrypted connections.
* **Auto-start:** Use `systemctl enable rustdesk` on the local Ubuntu machine to ensure it's online on boot.
* **Wayland Compatibility:** If you see a black screen remotely, modify `/etc/gdm3/custom.conf` to switch to **X11**.

---

## üìà "Maximizing Resources" Handbook

For your **2-core 2G / 200M** configuration, recommendations for ongoing operations:

1. **Memory Optimization (for 2GB):**
* **Swap is Life:** Enable 2-4GB of Swap in 1Panel to prevent container-related OOM (Out Of Memory) crashes.
* **Container Restraint:** Run only gateway-type applications (FRP, RustDesk, OpenResty) in the cloud. Heavy applications (Qinglong Panel, AList, databases, OpenModelica simulations) should all run on the **local Ubuntu** machine.


2. **Bandwidth Utilization (for 200Mbps):**
* **HD Remote Work:** Set RustDesk to "Original Quality". Your bandwidth is sufficient for 4K/60fps remote operations.
* **Direct File Access:** After mapping local AList, external downloads/streaming can reach up to 25MB/s.



---

## üìÖ Next Steps Roadmap

* **Automation (Scripts):** Deploy **Qinglong Panel** on the local Ubuntu machine, map it to the public network via FRP for management, and run Python scripts.
* **Cloud Image Bed/Drive:** If you're interested in GitHub, you can configure **PicGo + GitHub + AList** to build a personal image bed utilizing high bandwidth.
